{
  "tech_stack": [
    "JavaScript",
    "Cloudflare Workers",
    "Resend API",
    "Cloudflare KV",
    "Cloudflare D1",
    "HTML",
    "CSS",
    "Bash"
  ],
  "features": [
    {
      "name": "Email Contact API",
      "description": "Serverless API endpoint for processing contact form submissions with email delivery via Resend",
      "files": [
        "contact-form-resend.js",
        "wrangler.toml"
      ],
      "api_doc": {
        "openapi": "3.0.0",
        "info": {
          "title": "IT-ERA Email Contact API",
          "version": "2.0.0",
          "description": "Contact form email processing API"
        },
        "servers": [
          {
            "url": "https://it-era-email.bulltech.workers.dev",
            "description": "Production server"
          }
        ],
        "paths": {
          "/health": {
            "get": {
              "summary": "Health check endpoint",
              "responses": {
                "200": {
                  "description": "Service is healthy",
                  "content": {
                    "application/json": {
                      "schema": {
                        "type": "object",
                        "properties": {
                          "status": { "type": "string", "example": "ok" },
                          "service": { "type": "string" },
                          "provider": { "type": "string" },
                          "timestamp": { "type": "string", "format": "date-time" }
                        }
                      }
                    }
                  }
                }
              }
            }
          },
          "/api/contact": {
            "post": {
              "summary": "Submit contact form",
              "requestBody": {
                "required": true,
                "content": {
                  "application/json": {
                    "schema": {
                      "type": "object",
                      "required": ["nome", "email", "telefono", "privacy"],
                      "properties": {
                        "nome": {
                          "type": "string",
                          "minLength": 2,
                          "description": "Full name"
                        },
                        "email": {
                          "type": "string",
                          "format": "email",
                          "description": "Valid email address"
                        },
                        "telefono": {
                          "type": "string",
                          "pattern": "^(\\+39)?[\\s]?[0-9]{3,4}[\\s]?[0-9]{6,7}$",
                          "description": "Italian phone number"
                        },
                        "privacy": {
                          "type": "boolean",
                          "const": true,
                          "description": "Privacy policy acceptance"
                        },
                        "azienda": {
                          "type": "string",
                          "maxLength": 200,
                          "description": "Company name (optional)"
                        },
                        "comune": {
                          "type": "string",
                          "maxLength": 100,
                          "description": "City (optional)"
                        },
                        "messaggio": {
                          "type": "string",
                          "maxLength": 1000,
                          "description": "Message (optional)"
                        },
                        "servizi": {
                          "type": "array",
                          "items": { "type": "string" },
                          "description": "Requested services (optional)"
                        },
                        "urgenza": {
                          "type": "string",
                          "enum": ["normale", "urgente"],
                          "description": "Urgency level (optional)"
                        },
                        "formType": {
                          "type": "string",
                          "description": "Form type identifier (optional)"
                        }
                      }
                    }
                  }
                }
              },
              "responses": {
                "200": {
                  "description": "Email sent successfully",
                  "content": {
                    "application/json": {
                      "schema": {
                        "type": "object",
                        "properties": {
                          "success": { "type": "boolean", "example": true },
                          "message": { "type": "string" },
                          "ticketId": { "type": "string" },
                          "emailId": { "type": "string" },
                          "usedFallback": { "type": "boolean" }
                        }
                      }
                    }
                  }
                },
                "400": {
                  "description": "Validation error",
                  "content": {
                    "application/json": {
                      "schema": {
                        "type": "object",
                        "properties": {
                          "success": { "type": "boolean", "example": false },
                          "errors": {
                            "type": "array",
                            "items": { "type": "string" }
                          }
                        }
                      }
                    }
                  }
                },
                "429": {
                  "description": "Rate limit exceeded",
                  "content": {
                    "application/json": {
                      "schema": {
                        "type": "object",
                        "properties": {
                          "success": { "type": "boolean", "example": false },
                          "error": { "type": "string", "example": "Troppe richieste. Riprova domani." }
                        }
                      }
                    }
                  }
                },
                "500": {
                  "description": "Server error",
                  "content": {
                    "application/json": {
                      "schema": {
                        "type": "object",
                        "properties": {
                          "success": { "type": "boolean", "example": false },
                          "error": { "type": "string" }
                        }
                      }
                    }
                  }
                }
              }
            },
            "options": {
              "summary": "CORS preflight request",
              "responses": {
                "200": {
                  "description": "CORS headers returned",
                  "headers": {
                    "Access-Control-Allow-Origin": {
                      "schema": { "type": "string" }
                    },
                    "Access-Control-Allow-Methods": {
                      "schema": { "type": "string", "example": "POST, OPTIONS" }
                    },
                    "Access-Control-Allow-Headers": {
                      "schema": { "type": "string", "example": "Content-Type" }
                    }
                  }
                }
              }
            }
          }
        }
      }
    },
    {
      "name": "Frontend Form Handler",
      "description": "Client-side JavaScript for handling contact form validation and submission",
      "files": [
        "src/form-handler.js"
      ],
      "api_doc": {
        "openapi": "3.0.0",
        "info": {
          "title": "IT-ERA Form Handler Client Library",
          "version": "1.0.0",
          "description": "JavaScript library for contact form handling"
        },
        "components": {
          "schemas": {
            "ITERAFormHandler": {
              "type": "object",
              "description": "Main form handler class",
              "properties": {
                "apiEndpoint": {
                  "type": "string",
                  "description": "API endpoint URL"
                },
                "isSubmitting": {
                  "type": "boolean",
                  "description": "Form submission state"
                }
              },
              "methods": {
                "init": {
                  "description": "Initialize form handlers on page load"
                },
                "setupForm": {
                  "description": "Setup individual form with validation and submit handlers",
                  "parameters": [
                    {
                      "name": "form",
                      "type": "HTMLFormElement",
                      "description": "Form element to setup"
                    }
                  ]
                },
                "validateField": {
                  "description": "Validate individual form field",
                  "parameters": [
                    {
                      "name": "field",
                      "type": "HTMLInputElement",
                      "description": "Form field to validate"
                    }
                  ],
                  "returns": {
                    "type": "boolean",
                    "description": "Validation result"
                  }
                },
                "handleSubmit": {
                  "description": "Handle form submission with validation and API call",
                  "parameters": [
                    {
                      "name": "event",
                      "type": "Event",
                      "description": "Form submit event"
                    },
                    {
                      "name": "form",
                      "type": "HTMLFormElement",
                      "description": "Form being submitted"
                    }
                  ]
                }
              }
            }
          }
        }
      }
    },
    {
      "name": "Email Monitoring Scripts",
      "description": "Bash scripts for monitoring and testing the email system",
      "files": [
        "scripts/monitor-email.sh",
        "scripts/test-email-auto.sh",
        "scripts/test-resend.sh"
      ],
      "api_doc": {
        "openapi": "3.0.0",
        "info": {
          "title": "IT-ERA Monitoring Scripts",
          "version": "1.0.0",
          "description": "Command-line monitoring and testing tools"
        },
        "components": {
          "schemas": {
            "MonitorScript": {
              "type": "object",
              "description": "Real-time monitoring dashboard",
              "properties": {
                "healthChecks": {
                  "type": "boolean",
                  "description": "Continuous health monitoring"
                },
                "responseTimeTracking": {
                  "type": "boolean",
                  "description": "Response time measurement"
                },
                "rateLimitMonitoring": {
                  "type": "boolean",
                  "description": "Daily email limit tracking"
                },
                "interactiveCommands": {
                  "type": "array",
                  "items": { "type": "string" },
                  "description": "Available interactive commands",
                  "example": ["t - send test email", "l - show logs", "r - reset counters", "q - quit"]
                }
              }
            },
            "TestScript": {
              "type": "object",
              "description": "Automated test suite",
              "properties": {
                "testSuite": {
                  "type": "array",
                  "items": { "type": "string" },
                  "description": "Available tests",
                  "example": [
                    "Health check",
                    "CORS validation",
                    "Email validation", 
                    "Phone validation",
                    "Privacy check",
                    "XSS prevention",
                    "Response time",
                    "Complete form submission"
                  ]
                },
                "reportGeneration": {
                  "type": "boolean",
                  "description": "JSON test report generation"
                }
              }
            }
          }
        }
      }
    },
    {
      "name": "Documentation System",
      "description": "Comprehensive documentation for the email system",
      "files": [
        "docs/GUIDA-SISTEMA-EMAIL.md",
        "docs/INTEGRAZIONE-FRONTEND.md", 
        "docs/resend-setup-guide.md",
        "README-EMAIL-SYSTEM.md",
        "RESEND-INTEGRATION-SUMMARY.md",
        "docs/PRODUCT-SPECIFICATION.md"
      ],
      "api_doc": {
        "openapi": "3.0.0",
        "info": {
          "title": "IT-ERA Documentation",
          "version": "2.0.0",
          "description": "Complete documentation system"
        },
        "components": {
          "schemas": {
            "Documentation": {
              "type": "object",
              "properties": {
                "guides": {
                  "type": "array",
                  "items": { "type": "string" },
                  "description": "Available documentation guides"
                },
                "examples": {
                  "type": "object",
                  "description": "Code examples for different frameworks"
                },
                "troubleshooting": {
                  "type": "object",
                  "description": "Common issues and solutions"
                }
              }
            }
          }
        }
      }
    }
  ]
}