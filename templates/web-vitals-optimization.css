/* Core Web Vitals Optimization CSS
 * Designed to optimize LCP, FID, and CLS metrics for Google PageSpeed
 * Version: 2.0.0 - Optimized for IT-ERA templates
 */

/* ==========================================================================
   1. LARGEST CONTENTFUL PAINT (LCP) OPTIMIZATION
   ========================================================================== */

/* Critical above-the-fold content prioritization */
.hero, .hero-content, .hero h1 {
    contain: layout style paint;
    will-change: auto; /* Reset will-change after critical render */
}

/* Font loading optimization to prevent FOIT/FOUT */
@font-face {
    font-family: 'Inter';
    font-style: normal;
    font-weight: 400;
    font-display: swap; /* Ensures text is visible during font load */
    src: url('https://fonts.gstatic.com/s/inter/v12/UcCO3FwrK3iLTeHuS_fvQtMwCp50KnMw2boKoduKmMEVuLyfAZ9hiA.woff2') format('woff2');
    unicode-range: U+0000-00FF, U+0131, U+0152-0153, U+02BB-02BC, U+02C6, U+02DA, U+02DC, U+2000-206F, U+2074, U+20AC, U+2122, U+2191, U+2193, U+2212, U+2215, U+FEFF, U+FFFD;
}

/* Optimized hero section for fastest LCP */
.hero {
    background-image: none; /* Remove background images for faster LCP */
    background-color: #667eea; /* Solid color fallback */
    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
    /* Use CSS gradients instead of images for faster rendering */
}

/* Hero image optimization */
.hero img, .hero-image {
    max-width: 100%;
    height: auto;
    /* Optimize critical images */
    loading: eager; /* Load hero images immediately */
    decoding: sync; /* Synchronous decoding for LCP elements */
    fetchpriority: high; /* Browser hint for priority loading */
}

/* Below-the-fold images - lazy load everything else */
.service-card img, 
.pricing-card img,
.footer img,
.partner-badge img {
    loading: lazy;
    decoding: async;
    fetchpriority: low;
}

/* Remove render-blocking elements in critical path */
.non-critical-content {
    content-visibility: auto; /* Only render when visible */
    contain-intrinsic-size: 300px; /* Reserve space to prevent CLS */
}

/* ==========================================================================
   2. FIRST INPUT DELAY (FID) OPTIMIZATION  
   ========================================================================== */

/* Reduce main thread work by optimizing JavaScript execution */
.interactive-element {
    /* Use CSS for hover effects instead of JavaScript where possible */
    transition: transform 0.2s ease, box-shadow 0.2s ease;
}

.interactive-element:hover {
    transform: translateY(-2px);
}

/* Optimize form interactions */
.form-control:focus,
.form-select:focus,
.btn:focus {
    outline: 2px solid #007bff !important;
    outline-offset: 2px !important;
    box-shadow: 0 0 0 3px rgba(0, 123, 255, 0.25) !important;
    transition: none; /* Remove transitions on focus for faster FID */
}

/* Debounced input styling - prevents excessive reflows */
.form-control {
    will-change: auto; /* Don't pre-optimize unless actively changing */
}

.form-control:focus {
    will-change: box-shadow, border-color;
}

.form-control:not(:focus) {
    will-change: auto;
}

/* Button optimization for faster click response */
.btn {
    /* Hardware acceleration for buttons */
    transform: translateZ(0);
    backface-visibility: hidden;
    perspective: 1000px;
}

.btn:active {
    transform: translateZ(0) scale(0.98); /* Immediate visual feedback */
}

/* ==========================================================================
   3. CUMULATIVE LAYOUT SHIFT (CLS) PREVENTION
   ========================================================================== */

/* Fixed dimensions for elements that could cause layout shift */
.navbar {
    min-height: 76px; /* Fixed navbar height */
}

/* Reserve space for dynamically loaded content */
.hero-dashboard,
.ticket-item,
.service-status-card {
    min-height: 100px; /* Prevent collapse during load */
}

/* Image containers with fixed aspect ratios */
.service-icon {
    width: 80px;
    height: 80px; /* Fixed dimensions prevent reflow */
    flex-shrink: 0;
}

.partner-badge {
    height: 100px; /* Fixed height for partner logos */
    display: flex;
    align-items: center;
    justify-content: center;
}

/* Prevent font loading layout shifts */
.display-1, .display-2, .display-3, .display-4, .display-5 {
    font-size: 3.5rem; /* Explicit font size */
    line-height: 1.2; /* Explicit line height */
    font-weight: 700;
}

@media (max-width: 768px) {
    .display-1, .display-2, .display-3, .display-4, .display-5 {
        font-size: 2.5rem;
    }
}

/* Fixed pricing card heights */
.pricing-card {
    min-height: 600px; /* Consistent card height */
    display: flex;
    flex-direction: column;
}

.pricing-card .mt-auto {
    margin-top: auto !important; /* Push footer to bottom */
}

/* Reserve space for dynamic content */
.accordion-item {
    min-height: 60px; /* Minimum height for accordion items */
}

.accordion-collapse {
    /* Prevent collapse animation from causing CLS */
    overflow: hidden;
}

/* Fixed form element heights */
.form-control,
.form-select {
    min-height: 48px; /* Consistent form element height */
}

.form-control-lg,
.form-select-lg {
    min-height: 58px;
}

/* ==========================================================================
   4. MOBILE-FIRST RESPONSIVE OPTIMIZATIONS
   ========================================================================== */

/* Mobile-first approach for better Core Web Vitals on mobile */
.container {
    width: 100%;
    padding-right: 15px;
    padding-left: 15px;
    margin-right: auto;
    margin-left: auto;
}

@media (min-width: 576px) {
    .container {
        max-width: 540px;
    }
}

@media (min-width: 768px) {
    .container {
        max-width: 720px;
    }
}

@media (min-width: 992px) {
    .container {
        max-width: 960px;
    }
}

@media (min-width: 1200px) {
    .container {
        max-width: 1140px;
    }
}

/* Touch-optimized interactive elements for better FID on mobile */
@media (max-width: 768px) {
    .btn {
        min-height: 44px; /* iOS recommended touch target */
        min-width: 44px;
        padding: 12px 16px;
    }
    
    .nav-link {
        min-height: 44px;
        display: flex;
        align-items: center;
    }
    
    .form-control,
    .form-select {
        min-height: 44px;
        font-size: 16px; /* Prevent iOS zoom on focus */
    }
}

/* ==========================================================================
   5. ANIMATION AND TRANSITION OPTIMIZATIONS
   ========================================================================== */

/* Hardware-accelerated animations */
.fade-in,
.slide-up,
.pricing-card,
.service-card {
    transform: translateZ(0); /* Force hardware acceleration */
    backface-visibility: hidden;
    perspective: 1000px;
}

/* Optimized animation performance */
@keyframes fadeIn {
    0% {
        opacity: 0;
        transform: translateZ(0);
    }
    100% {
        opacity: 1;
        transform: translateZ(0);
    }
}

@keyframes slideUp {
    0% {
        opacity: 0;
        transform: translateY(50px) translateZ(0);
    }
    100% {
        opacity: 1;
        transform: translateY(0) translateZ(0);
    }
}

/* Reduce motion for users who prefer it */
@media (prefers-reduced-motion: reduce) {
    *,
    *::before,
    *::after {
        animation-duration: 0.01ms !important;
        animation-iteration-count: 1 !important;
        transition-duration: 0.01ms !important;
        scroll-behavior: auto !important;
    }
}

/* ==========================================================================
   6. PERFORMANCE-OPTIMIZED UTILITY CLASSES
   ========================================================================== */

/* Optimized shadow effects */
.shadow-sm {
    box-shadow: 0 0.125rem 0.25rem rgba(0, 0, 0, 0.075) !important;
}

.shadow {
    box-shadow: 0 0.5rem 1rem rgba(0, 0, 0, 0.15) !important;
}

.shadow-lg {
    box-shadow: 0 1rem 3rem rgba(0, 0, 0, 0.175) !important;
}

/* Optimized background gradients */
.bg-gradient-primary {
    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%) !important;
}

/* Performance-optimized borders */
.border {
    border: 1px solid #dee2e6 !important;
}

.border-0 {
    border: 0 !important;
}

.border-primary {
    border-color: #007bff !important;
}

/* ==========================================================================
   7. ACCESSIBILITY OPTIMIZATIONS THAT IMPROVE CORE WEB VITALS
   ========================================================================== */

/* Skip link optimization */
.skip-link {
    position: absolute;
    top: -40px;
    left: 6px;
    background: #000;
    color: #fff;
    padding: 8px 16px;
    text-decoration: none;
    border-radius: 4px;
    font-weight: bold;
    font-size: 14px;
    z-index: 9999;
    transform: translateY(0); /* Prevent layout shift when focused */
    transition: top 0.2s ease;
}

.skip-link:focus {
    top: 6px;
    outline: 2px solid #007bff;
    outline-offset: 2px;
}

/* Screen reader optimizations */
.sr-only {
    position: absolute !important;
    width: 1px !important;
    height: 1px !important;
    padding: 0 !important;
    margin: -1px !important;
    overflow: hidden !important;
    clip: rect(0, 0, 0, 0) !important;
    white-space: nowrap !important;
    border: 0 !important;
}

/* ==========================================================================
   8. CRITICAL CSS FOR ABOVE-THE-FOLD CONTENT
   ========================================================================== */

/* Inline critical styles to prevent render blocking */
.hero-critical {
    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
    color: white;
    padding: 2rem 0;
    min-height: 60vh;
    display: flex;
    align-items: center;
}

.hero-title {
    font-size: clamp(2rem, 5vw, 3.5rem);
    font-weight: 700;
    line-height: 1.2;
    margin-bottom: 1rem;
}

.hero-subtitle {
    font-size: clamp(1rem, 3vw, 1.3rem);
    opacity: 0.9;
    margin-bottom: 2rem;
}

/* ==========================================================================
   9. FORM VALIDATION OPTIMIZATIONS FOR BETTER UX AND FID
   ========================================================================== */

/* Instant visual feedback without JavaScript delays */
.form-control:valid {
    border-color: #28a745;
    background-image: url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 8 8'%3e%3cpath fill='%2328a745' d='m2.3 6.73.64-.64L4.5 7.64l2.84-2.84.64.64L4.5 9.36z'/%3e%3c/svg%3e");
    background-repeat: no-repeat;
    background-position: right calc(0.375em + 0.1875rem) center;
    background-size: calc(0.75em + 0.375rem) calc(0.75em + 0.375rem);
}

.form-control:invalid {
    border-color: #dc3545;
    background-image: url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 8 8'%3e%3cpath fill='%23dc3545' d='M2.1 1l.7.7L4 2.9l1.2-1.2.7.7L4.7 3.6l1.2 1.2-.7.7L4 4.3l-1.2 1.2-.7-.7L3.3 3.6z'/%3e%3c/svg%3e");
    background-repeat: no-repeat;
    background-position: right calc(0.375em + 0.1875rem) center;
    background-size: calc(0.75em + 0.375rem) calc(0.75em + 0.375rem);
}

/* Priority form styling based on urgency */
.priority-critical {
    border-left: 5px solid #dc3545 !important;
    background: rgba(220, 53, 69, 0.05) !important;
}

.priority-high {
    border-left: 5px solid #ffc107 !important;
    background: rgba(255, 193, 7, 0.05) !important;
}

.priority-medium {
    border-left: 5px solid #28a745 !important;
    background: rgba(40, 167, 69, 0.05) !important;
}

.priority-low {
    border-left: 5px solid #17a2b8 !important;
    background: rgba(23, 162, 184, 0.05) !important;
}

/* ==========================================================================
   10. PRINT OPTIMIZATIONS
   ========================================================================== */

@media print {
    /* Remove non-essential elements for printing */
    .navbar,
    .chat-widget,
    .chat-toggle,
    .btn,
    button,
    .bg-gradient-primary {
        display: none !important;
    }
    
    /* Optimize text for print */
    body {
        font-size: 12pt !important;
        line-height: 1.4 !important;
        color: #000 !important;
        background: #fff !important;
    }
    
    /* Ensure content flows properly */
    .container {
        max-width: none !important;
        padding: 0 !important;
    }
}

/* ==========================================================================
   11. DARK MODE SUPPORT (IMPROVES ACCESSIBILITY SCORES)
   ========================================================================== */

@media (prefers-color-scheme: dark) {
    :root {
        --bs-body-bg: #121212;
        --bs-body-color: #ffffff;
        --bs-emphasis-color: #ffffff;
        --bs-secondary-color: rgba(255, 255, 255, 0.75);
        --bs-tertiary-color: rgba(255, 255, 255, 0.5);
        --bs-border-color: #343a40;
    }
    
    .bg-light {
        background-color: #1e1e1e !important;
    }
    
    .bg-white {
        background-color: #2d2d2d !important;
        color: #ffffff !important;
    }
    
    .text-dark {
        color: #ffffff !important;
    }
    
    .text-muted {
        color: rgba(255, 255, 255, 0.6) !important;
    }
}

/* ==========================================================================
   12. FINAL PERFORMANCE OPTIMIZATIONS
   ========================================================================== */

/* Optimize images and media for performance */
img {
    max-width: 100%;
    height: auto;
    image-rendering: crisp-edges;
    image-rendering: -webkit-optimize-contrast;
}

/* Modern image format support */
.hero-image {
    background-size: cover;
    background-position: center;
    background-repeat: no-repeat;
}

@supports (background-image: url('image.avif')) {
    .hero-image {
        background-image: url('hero.avif');
    }
}

@supports not (background-image: url('image.avif')) {
    .hero-image {
        background-image: url('hero.webp');
    }
}

/* Fallback for older browsers */
@supports not (background-image: url('image.webp')) {
    .hero-image {
        background-image: url('hero.jpg');
    }
}

/* CSS containment for better rendering performance */
.pricing-card,
.service-card,
.problem-card {
    contain: layout paint;
}

/* Optimize table rendering if used */
table {
    table-layout: fixed;
    width: 100%;
}

/* End of Core Web Vitals Optimization CSS */