<!-- Dynamic City Template for IT-ERA -->
<section class="city-hero">
    <div class="container">
        <div class="hero-content">
            <div class="hero-text">
                <h1 class="hero-title">
                    Assistenza IT <%= cityName %> | Supporto Tecnico Professionale
                </h1>
                <p class="hero-subtitle">
                    Supporto IT specializzato per aziende a <%= cityName %> e provincia di <%= cityData.province %>. 
                    Intervento garantito entro <%= responseTime %>.
                </p>
                
                <!-- Trust Indicators -->
                <div class="trust-indicators">
                    <div class="trust-item">
                        <span class="trust-number"><%= responseTime %></span>
                        <span class="trust-label">Tempo di Risposta</span>
                    </div>
                    <div class="trust-item">
                        <span class="trust-number">24/7</span>
                        <span class="trust-label">Supporto Emergenze</span>
                    </div>
                    <div class="trust-item">
                        <span class="trust-number">95%</span>
                        <span class="trust-label">Tasso di Successo</span>
                    </div>
                </div>
                
                <!-- CTA Buttons -->
                <div class="hero-cta">
                    <a href="tel:+390398882041" class="btn btn-primary btn-large">
                        üìû Chiama Ora: 039 888 2041
                    </a>
                    <a href="#preventivo" class="btn btn-secondary btn-large">
                        üí¨ Preventivo Gratuito
                    </a>
                </div>
            </div>
            
            <div class="hero-image">
                <img src="/images/assistenza-it-<%= citySlug %>.jpg" 
                     alt="Assistenza IT <%= cityName %> - IT-ERA" 
                     loading="lazy"
                     onerror="this.src='/images/assistenza-it-default.jpg'">
            </div>
        </div>
    </div>
</section>

<!-- City Info Section -->
<section class="city-info">
    <div class="container">
        <div class="section-header">
            <h2>Assistenza IT Professionale a <%= cityName %></h2>
            <p><%= cityData.description %></p>
        </div>
        
        <div class="city-stats">
            <div class="stat-card">
                <div class="stat-icon">üè¢</div>
                <h4>Copertura</h4>
                <p><%= coverage %></p>
            </div>
            <div class="stat-card">
                <div class="stat-icon">‚ö°</div>
                <h4>Risposta</h4>
                <p><%= responseTime %></p>
            </div>
            <div class="stat-card">
                <div class="stat-icon">üéØ</div>
                <h4>Specializzazioni</h4>
                <p><%= cityData.specializations ? cityData.specializations.join(', ') : 'Tutti i settori' %></p>
            </div>
        </div>
    </div>
</section>

<!-- Services Section -->
<section class="services-city">
    <div class="container">
        <div class="section-header">
            <h2>Servizi IT a <%= cityName %></h2>
            <p>Soluzioni complete per la tua infrastruttura tecnologica</p>
        </div>
        
        <div class="services-grid">
            <% services.forEach(function(service) { %>
            <div class="service-card">
                <div class="service-icon">
                    <% if (service === 'Assistenza tecnica on-site') { %>üîß
                    <% } else if (service === 'Supporto remoto 24/7') { %>üíª
                    <% } else if (service === 'Manutenzione preventiva') { %>üõ†Ô∏è
                    <% } else if (service === 'Consulenza IT strategica') { %>üìä
                    <% } else { %>‚öôÔ∏è<% } %>
                </div>
                <h3><%= service %></h3>
                <p>
                    <% if (service === 'Assistenza tecnica on-site') { %>
                        Interventi diretti presso la tua sede a <%= cityName %> per risolvere problemi hardware e software.
                    <% } else if (service === 'Supporto remoto 24/7') { %>
                        Assistenza remota disponibile 24 ore su 24 per emergenze IT a <%= cityName %>.
                    <% } else if (service === 'Manutenzione preventiva') { %>
                        Controlli periodici per prevenire guasti e ottimizzare le performance dei tuoi sistemi.
                    <% } else if (service === 'Consulenza IT strategica') { %>
                        Pianificazione tecnologica per far crescere la tua azienda a <%= cityName %>.
                    <% } else { %>
                        Servizio professionale per aziende a <%= cityName %> e provincia.
                    <% } %>
                </p>
            </div>
            <% }); %>
        </div>
    </div>
</section>

<!-- Specialized Services -->
<section class="specialized-services">
    <div class="container">
        <div class="section-header">
            <h2>Servizi Specializzati per <%= cityName %></h2>
            <p>Soluzioni avanzate per ogni esigenza aziendale</p>
        </div>
        
        <div class="specialized-grid">
            <a href="/sicurezza-informatica-<%= citySlug %>" class="specialized-card">
                <div class="specialized-icon">üõ°Ô∏è</div>
                <h4>Sicurezza Informatica</h4>
                <p>Protezione avanzata contro cyber minacce per aziende a <%= cityName %></p>
                <span class="specialized-link">Scopri di pi√π ‚Üí</span>
            </a>
            
            <a href="/cloud-storage-<%= citySlug %>" class="specialized-card">
                <div class="specialized-icon">‚òÅÔ∏è</div>
                <h4>Cloud Storage</h4>
                <p>Soluzioni cloud sicure e scalabili per <%= cityName %></p>
                <span class="specialized-link">Scopri di pi√π ‚Üí</span>
            </a>
            
            <a href="/backup-disaster-recovery-<%= citySlug %>" class="specialized-card">
                <div class="specialized-icon">üíæ</div>
                <h4>Backup & Recovery</h4>
                <p>Protezione dati e disaster recovery per <%= cityName %></p>
                <span class="specialized-link">Scopri di pi√π ‚Üí</span>
            </a>
            
            <a href="/microsoft-365-<%= citySlug %>" class="specialized-card">
                <div class="specialized-icon">üìß</div>
                <h4>Microsoft 365</h4>
                <p>Implementazione e gestione Office 365 a <%= cityName %></p>
                <span class="specialized-link">Scopri di pi√π ‚Üí</span>
            </a>
            
            <a href="/voip-centralino-<%= citySlug %>" class="specialized-card">
                <div class="specialized-icon">üìû</div>
                <h4>VoIP Centralino</h4>
                <p>Telefonia cloud professionale per <%= cityName %></p>
                <span class="specialized-link">Scopri di pi√π ‚Üí</span>
            </a>
            
            <a href="/firewall-watchguard-<%= citySlug %>" class="specialized-card">
                <div class="specialized-icon">üî•</div>
                <h4>Firewall WatchGuard</h4>
                <p>Firewall enterprise per la sicurezza di rete a <%= cityName %></p>
                <span class="specialized-link">Scopri di pi√π ‚Üí</span>
            </a>
        </div>
    </div>
</section>

<!-- Local Presence -->
<section class="local-presence">
    <div class="container">
        <div class="presence-content">
            <div class="presence-text">
                <h2>La Nostra Presenza a <%= cityName %></h2>
                <p>
                    IT-ERA √® presente sul territorio di <%= cityName %> con tecnici specializzati 
                    che conoscono le specifiche esigenze delle aziende locali. 
                    <% if (cityData.specializations && cityData.specializations.length > 0) { %>
                    Abbiamo particolare esperienza nel settore 
                    <%= cityData.specializations.join(', ').toLowerCase() %>.
                    <% } %>
                </p>
                
                <div class="presence-features">
                    <div class="feature-item">
                        <span class="feature-icon">üöó</span>
                        <div>
                            <h4>Interventi On-Site</h4>
                            <p>Tecnici qualificati direttamente presso la tua sede a <%= cityName %></p>
                        </div>
                    </div>
                    
                    <div class="feature-item">
                        <span class="feature-icon">üì±</span>
                        <div>
                            <h4>Supporto Remoto</h4>
                            <p>Assistenza immediata tramite connessione remota sicura</p>
                        </div>
                    </div>
                    
                    <div class="feature-item">
                        <span class="feature-icon">üèÜ</span>
                        <div>
                            <h4>Esperienza Locale</h4>
                            <p>Conoscenza approfondita del tessuto imprenditoriale di <%= cityName %></p>
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="presence-map">
                <div class="map-placeholder">
                    <h4>üìç <%= cityName %></h4>
                    <p>Copertura: <%= coverage %></p>
                    <p>Tempo di intervento: <%= responseTime %></p>
                </div>
            </div>
        </div>
    </div>
</section>

<!-- Quote Form -->
<section class="quote-form-city" id="preventivo">
    <div class="container">
        <div class="form-container">
            <div class="form-header">
                <h2>Richiedi un Preventivo per <%= cityName %></h2>
                <p>Ricevi un preventivo personalizzato entro 2 ore</p>
            </div>
            
            <form id="cityQuoteForm" class="quote-form-grid">
                <input type="hidden" name="city" value="<%= cityName %>">
                <input type="hidden" name="province" value="<%= cityData.province %>">
                
                <div class="form-group">
                    <label for="company">Nome Azienda *</label>
                    <input type="text" id="company" name="company" required>
                </div>
                
                <div class="form-group">
                    <label for="contact">Nome e Cognome *</label>
                    <input type="text" id="contact" name="contact" required>
                </div>
                
                <div class="form-group">
                    <label for="email">Email *</label>
                    <input type="email" id="email" name="email" required>
                </div>
                
                <div class="form-group">
                    <label for="phone">Telefono *</label>
                    <input type="tel" id="phone" name="phone" required>
                </div>
                
                <div class="form-group">
                    <label for="employees">Numero Dipendenti</label>
                    <select id="employees" name="employees">
                        <option value="">Seleziona...</option>
                        <option value="1-5">1-5 dipendenti</option>
                        <option value="6-20">6-20 dipendenti</option>
                        <option value="21-50">21-50 dipendenti</option>
                        <option value="51+">Oltre 50 dipendenti</option>
                    </select>
                </div>
                
                <div class="form-group">
                    <label for="services">Servizi di Interesse</label>
                    <select id="services" name="services" multiple>
                        <option value="assistenza-it">Assistenza IT</option>
                        <option value="sicurezza">Sicurezza Informatica</option>
                        <option value="cloud">Cloud Storage</option>
                        <option value="backup">Backup & Recovery</option>
                        <option value="microsoft365">Microsoft 365</option>
                        <option value="voip">VoIP Aziendale</option>
                    </select>
                </div>
                
                <div class="form-group full-width">
                    <label for="message">Descrivi le tue esigenze</label>
                    <textarea id="message" name="message" rows="4" 
                              placeholder="Descrivi brevemente le tue esigenze IT per <%= cityName %>..."></textarea>
                </div>
                
                <div class="form-group full-width">
                    <button type="submit" class="btn btn-primary btn-large">
                        üìß Invia Richiesta Preventivo
                    </button>
                </div>
            </form>
        </div>
    </div>
</section>

<style>
/* City-specific styles */
.city-hero {
    background: linear-gradient(135deg, var(--primary) 0%, var(--secondary) 100%);
    color: white;
    padding: 4rem 0;
    min-height: 70vh;
    display: flex;
    align-items: center;
}

.city-info {
    padding: 3rem 0;
    background: var(--gray-50);
}

.city-stats {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
    gap: 2rem;
    margin-top: 2rem;
}

.stat-card {
    background: white;
    padding: 2rem;
    border-radius: 1rem;
    text-align: center;
    box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
}

.stat-icon {
    font-size: 3rem;
    margin-bottom: 1rem;
}

.services-city {
    padding: 4rem 0;
}

.specialized-services {
    padding: 4rem 0;
    background: var(--gray-50);
}

.specialized-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
    gap: 2rem;
}

.specialized-card {
    background: white;
    padding: 2rem;
    border-radius: 1rem;
    text-decoration: none;
    color: var(--gray-900);
    transition: all 0.3s ease;
    border: 2px solid transparent;
}

.specialized-card:hover {
    border-color: var(--primary);
    transform: translateY(-5px);
    box-shadow: 0 8px 25px rgba(0, 0, 0, 0.15);
}

.specialized-icon {
    font-size: 3rem;
    margin-bottom: 1rem;
}

.specialized-link {
    color: var(--primary);
    font-weight: 600;
}

.local-presence {
    padding: 4rem 0;
}

.presence-content {
    display: grid;
    grid-template-columns: 2fr 1fr;
    gap: 3rem;
    align-items: center;
}

.feature-item {
    display: flex;
    align-items: flex-start;
    gap: 1rem;
    margin-bottom: 2rem;
}

.feature-icon {
    font-size: 2rem;
    flex-shrink: 0;
}

.map-placeholder {
    background: var(--gray-100);
    padding: 3rem;
    border-radius: 1rem;
    text-align: center;
    border: 2px dashed var(--gray-300);
}

.quote-form-city {
    padding: 4rem 0;
    background: var(--primary);
    color: white;
}

/* Responsive */
@media (max-width: 768px) {
    .presence-content {
        grid-template-columns: 1fr;
    }
    
    .city-stats {
        grid-template-columns: 1fr;
    }
    
    .specialized-grid {
        grid-template-columns: 1fr;
    }
}
</style>

<script>
// City quote form handling
document.getElementById('cityQuoteForm').addEventListener('submit', async function(e) {
    e.preventDefault();
    
    const formData = new FormData(this);
    const data = Object.fromEntries(formData);
    
    try {
        const response = await fetch('/api/quote', {
            method: 'POST',
            headers: {
                'Content-Type': 'application/json',
            },
            body: JSON.stringify(data)
        });
        
        const result = await response.json();
        
        if (result.success) {
            alert('Richiesta inviata con successo! Ti contatteremo entro 2 ore per <%= cityName %>.');
            this.reset();
        } else {
            alert('Errore nell\'invio. Riprova o chiamaci al 039 888 2041.');
        }
    } catch (error) {
        alert('Errore di connessione. Riprova o chiamaci al 039 888 2041.');
    }
});
</script>
