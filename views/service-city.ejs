<!-- Dynamic Service-City Template for IT-ERA -->
<section class="service-city-hero">
    <div class="container">
        <div class="hero-content">
            <div class="hero-text">
                <h1 class="hero-title">
                    <%= serviceName %> <%= cityName %> | IT-ERA
                </h1>
                <p class="hero-subtitle">
                    <%= serviceData.description.replace(/{city}/g, cityName).replace(/{province}/g, cityData.province) %>
                </p>
                
                <!-- Service Features -->
                <div class="service-features">
                    <% serviceData.services.forEach(function(feature, index) { %>
                        <% if (index < 3) { %>
                        <div class="feature-badge">
                            ‚úì <%= feature %>
                        </div>
                        <% } %>
                    <% }); %>
                </div>
                
                <!-- CTA Buttons -->
                <div class="hero-cta">
                    <a href="tel:+390398882041" class="btn btn-primary btn-large">
                        üìû Chiama Ora: 039 888 2041
                    </a>
                    <a href="#preventivo" class="btn btn-secondary btn-large">
                        üí¨ Preventivo Gratuito
                    </a>
                </div>
            </div>
            
            <div class="hero-image">
                <img src="/images/<%= serviceType %>-<%= citySlug %>.jpg" 
                     alt="<%= serviceName %> <%= cityName %> - IT-ERA" 
                     loading="lazy"
                     onerror="this.src='/images/<%= serviceType %>-default.jpg'">
            </div>
        </div>
    </div>
</section>

<!-- Service Details -->
<section class="service-details">
    <div class="container">
        <div class="section-header">
            <h2><%= serviceName %> per Aziende a <%= cityName %></h2>
            <p>Soluzioni professionali su misura per il territorio di <%= cityData.province %></p>
        </div>
        
        <div class="details-grid">
            <div class="details-content">
                <h3>Perch√© Scegliere IT-ERA per <%= serviceName %> a <%= cityName %>?</h3>
                
                <div class="benefits-list">
                    <% serviceData.services.forEach(function(service) { %>
                    <div class="benefit-item">
                        <span class="benefit-icon">
                            <% if (service.includes('24/7') || service.includes('Monitoraggio')) { %>üïê
                            <% } else if (service.includes('sicurezza') || service.includes('Firewall') || service.includes('Antivirus')) { %>üõ°Ô∏è
                            <% } else if (service.includes('cloud') || service.includes('Cloud') || service.includes('Backup')) { %>‚òÅÔ∏è
                            <% } else if (service.includes('Formazione') || service.includes('Consulenza')) { %>üìö
                            <% } else if (service.includes('Implementazione') || service.includes('Migrazione')) { %>‚öôÔ∏è
                            <% } else if (service.includes('Supporto') || service.includes('Assistenza')) { %>üîß
                            <% } else { %>‚úÖ<% } %>
                        </span>
                        <div>
                            <h4><%= service %></h4>
                            <p>
                                <% if (service.includes('24/7')) { %>
                                    Disponibilit√† continua per emergenze e supporto critico a <%= cityName %>.
                                <% } else if (service.includes('Monitoraggio')) { %>
                                    Sorveglianza costante dei tuoi sistemi per prevenire problemi.
                                <% } else if (service.includes('Firewall')) { %>
                                    Protezione perimetrale avanzata per la tua rete aziendale.
                                <% } else if (service.includes('Backup')) { %>
                                    Protezione completa dei tuoi dati con ripristino garantito.
                                <% } else if (service.includes('Formazione')) { %>
                                    Training specializzato per il tuo team a <%= cityName %>.
                                <% } else { %>
                                    Servizio professionale dedicato alle aziende di <%= cityName %>.
                                <% } %>
                            </p>
                        </div>
                    </div>
                    <% }); %>
                </div>
            </div>
            
            <div class="details-sidebar">
                <div class="info-card">
                    <h4>üìç Copertura <%= cityName %></h4>
                    <p><%= coverage %></p>
                    <p><strong>Tempo di intervento:</strong> <%= responseTime %></p>
                </div>
                
                <div class="info-card">
                    <h4>üèÜ Specializzazioni Locali</h4>
                    <% if (cityData.specializations && cityData.specializations.length > 0) { %>
                        <ul>
                            <% cityData.specializations.forEach(function(spec) { %>
                            <li><%= spec %></li>
                            <% }); %>
                        </ul>
                    <% } else { %>
                        <p>Tutti i settori aziendali</p>
                    <% } %>
                </div>
                
                <div class="info-card">
                    <h4>üìû Contatto Diretto</h4>
                    <p><strong>Telefono:</strong> 039 888 2041</p>
                    <p><strong>Email:</strong> info@it-era.it</p>
                    <p><strong>Emergenze:</strong> 24/7</p>
                </div>
            </div>
        </div>
    </div>
</section>

<!-- Process Section -->
<section class="service-process">
    <div class="container">
        <div class="section-header">
            <h2>Come Funziona il Nostro Servizio</h2>
            <p>Processo semplice e trasparente per <%= serviceName %> a <%= cityName %></p>
        </div>
        
        <div class="process-steps">
            <div class="step">
                <div class="step-number">1</div>
                <h4>Contatto Iniziale</h4>
                <p>Chiamaci o compila il form per una consulenza gratuita a <%= cityName %></p>
            </div>
            
            <div class="step">
                <div class="step-number">2</div>
                <h4>Analisi Tecnica</h4>
                <p>Valutiamo le tue esigenze e progettiamo la soluzione ottimale</p>
            </div>
            
            <div class="step">
                <div class="step-number">3</div>
                <h4>Implementazione</h4>
                <p>Installiamo e configuriamo il servizio presso la tua sede</p>
            </div>
            
            <div class="step">
                <div class="step-number">4</div>
                <h4>Supporto Continuo</h4>
                <p>Assistenza e monitoraggio costante per garantire il funzionamento</p>
            </div>
        </div>
    </div>
</section>

<!-- Related Services -->
<section class="related-services">
    <div class="container">
        <div class="section-header">
            <h2>Altri Servizi IT a <%= cityName %></h2>
            <p>Soluzioni complete per la tua azienda</p>
        </div>
        
        <div class="related-grid">
            <% if (serviceType !== 'assistenza-it') { %>
            <a href="/assistenza-it-<%= citySlug %>" class="related-card">
                <div class="related-icon">üîß</div>
                <h4>Assistenza IT</h4>
                <p>Supporto tecnico completo a <%= cityName %></p>
            </a>
            <% } %>
            
            <% if (serviceType !== 'sicurezza-informatica') { %>
            <a href="/sicurezza-informatica-<%= citySlug %>" class="related-card">
                <div class="related-icon">üõ°Ô∏è</div>
                <h4>Sicurezza Informatica</h4>
                <p>Protezione cyber avanzata per <%= cityName %></p>
            </a>
            <% } %>
            
            <% if (serviceType !== 'cloud-storage') { %>
            <a href="/cloud-storage-<%= citySlug %>" class="related-card">
                <div class="related-icon">‚òÅÔ∏è</div>
                <h4>Cloud Storage</h4>
                <p>Archiviazione cloud sicura a <%= cityName %></p>
            </a>
            <% } %>
            
            <% if (serviceType !== 'microsoft-365') { %>
            <a href="/microsoft-365-<%= citySlug %>" class="related-card">
                <div class="related-icon">üìß</div>
                <h4>Microsoft 365</h4>
                <p>Office 365 per aziende di <%= cityName %></p>
            </a>
            <% } %>
        </div>
    </div>
</section>

<!-- Quote Form -->
<section class="quote-form-service" id="preventivo">
    <div class="container">
        <div class="form-container">
            <div class="form-header">
                <h2>Richiedi Preventivo per <%= serviceName %> a <%= cityName %></h2>
                <p>Consulenza gratuita e preventivo personalizzato entro 2 ore</p>
            </div>
            
            <form id="serviceQuoteForm" class="quote-form-grid">
                <input type="hidden" name="service" value="<%= serviceType %>">
                <input type="hidden" name="city" value="<%= cityName %>">
                <input type="hidden" name="province" value="<%= cityData.province %>">
                
                <div class="form-group">
                    <label for="company">Nome Azienda *</label>
                    <input type="text" id="company" name="company" required>
                </div>
                
                <div class="form-group">
                    <label for="contact">Nome e Cognome *</label>
                    <input type="text" id="contact" name="contact" required>
                </div>
                
                <div class="form-group">
                    <label for="email">Email *</label>
                    <input type="email" id="email" name="email" required>
                </div>
                
                <div class="form-group">
                    <label for="phone">Telefono *</label>
                    <input type="tel" id="phone" name="phone" required>
                </div>
                
                <div class="form-group full-width">
                    <label for="message">Descrivi le tue esigenze per <%= serviceName %></label>
                    <textarea id="message" name="message" rows="4" 
                              placeholder="Descrivi le tue esigenze specifiche per <%= serviceName %> a <%= cityName %>..."></textarea>
                </div>
                
                <div class="form-group full-width">
                    <button type="submit" class="btn btn-primary btn-large">
                        üìß Richiedi Preventivo Gratuito
                    </button>
                </div>
            </form>
        </div>
    </div>
</section>

<style>
/* Service-City specific styles */
.service-city-hero {
    background: linear-gradient(135deg, var(--primary) 0%, var(--secondary) 100%);
    color: white;
    padding: 4rem 0;
    min-height: 70vh;
    display: flex;
    align-items: center;
}

.service-features {
    display: flex;
    flex-wrap: wrap;
    gap: 1rem;
    margin: 2rem 0;
}

.feature-badge {
    background: rgba(255, 255, 255, 0.2);
    padding: 0.5rem 1rem;
    border-radius: 2rem;
    font-size: 0.9rem;
    font-weight: 600;
}

.service-details {
    padding: 4rem 0;
}

.details-grid {
    display: grid;
    grid-template-columns: 2fr 1fr;
    gap: 3rem;
    margin-top: 2rem;
}

.benefit-item {
    display: flex;
    align-items: flex-start;
    gap: 1rem;
    margin-bottom: 2rem;
    padding: 1.5rem;
    background: var(--gray-50);
    border-radius: 0.5rem;
}

.benefit-icon {
    font-size: 2rem;
    flex-shrink: 0;
}

.info-card {
    background: white;
    padding: 2rem;
    border-radius: 1rem;
    box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
    margin-bottom: 2rem;
}

.info-card h4 {
    margin-bottom: 1rem;
    color: var(--primary);
}

.info-card ul {
    list-style: none;
    padding: 0;
}

.info-card ul li {
    padding: 0.25rem 0;
    border-bottom: 1px solid var(--gray-200);
}

.service-process {
    padding: 4rem 0;
    background: var(--gray-50);
}

.process-steps {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
    gap: 2rem;
    margin-top: 2rem;
}

.step {
    text-align: center;
    padding: 2rem;
    background: white;
    border-radius: 1rem;
    box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
}

.step-number {
    width: 60px;
    height: 60px;
    background: var(--primary);
    color: white;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 1.5rem;
    font-weight: bold;
    margin: 0 auto 1rem;
}

.related-services {
    padding: 4rem 0;
}

.related-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
    gap: 2rem;
}

.related-card {
    background: white;
    padding: 2rem;
    border-radius: 1rem;
    text-decoration: none;
    color: var(--gray-900);
    transition: all 0.3s ease;
    border: 2px solid var(--gray-200);
    text-align: center;
}

.related-card:hover {
    border-color: var(--primary);
    transform: translateY(-5px);
    box-shadow: 0 8px 25px rgba(0, 0, 0, 0.15);
}

.related-icon {
    font-size: 3rem;
    margin-bottom: 1rem;
}

.quote-form-service {
    padding: 4rem 0;
    background: var(--primary);
    color: white;
}

/* Responsive */
@media (max-width: 768px) {
    .details-grid {
        grid-template-columns: 1fr;
    }
    
    .process-steps {
        grid-template-columns: 1fr;
    }
    
    .related-grid {
        grid-template-columns: 1fr;
    }
    
    .service-features {
        justify-content: center;
    }
}
</style>

<script>
// Service quote form handling
document.getElementById('serviceQuoteForm').addEventListener('submit', async function(e) {
    e.preventDefault();
    
    const formData = new FormData(this);
    const data = Object.fromEntries(formData);
    
    try {
        const response = await fetch('/api/quote', {
            method: 'POST',
            headers: {
                'Content-Type': 'application/json',
            },
            body: JSON.stringify(data)
        });
        
        const result = await response.json();
        
        if (result.success) {
            alert('Richiesta inviata con successo! Ti contatteremo entro 2 ore per <%= serviceName %> a <%= cityName %>.');
            this.reset();
        } else {
            alert('Errore nell\'invio. Riprova o chiamaci al 039 888 2041.');
        }
    } catch (error) {
        alert('Errore di connessione. Riprova o chiamaci al 039 888 2041.');
    }
});
</script>
