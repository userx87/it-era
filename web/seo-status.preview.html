<!DOCTYPE html>
<html lang="it">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>SEO Status (preview)</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">

<!-- Google Analytics 4 - IT-ERA -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-T5VWN9EH21"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag("js", new Date());
  gtag("config", "G-T5VWN9EH21", {
    page_title: document.title,
    page_location: window.location.href,
    custom_map: {
      "custom_parameter_1": "service_type",
      "custom_parameter_2": "city_name"
    }
  });
  
  // IT-ERA Enhanced Events
  gtag("event", "page_view", {
    event_category: "engagement",
    event_label: window.location.pathname,
    service_type: document.querySelector("h1") ? document.querySelector("h1").textContent.includes("Assistenza") ? "assistenza-it" : 
                  document.querySelector("h1").textContent.includes("Sicurezza") ? "sicurezza-informatica" :
                  document.querySelector("h1").textContent.includes("Cloud") ? "cloud-storage" : "general" : "general"
  });
</script>
<!-- End Google Analytics 4 -->

<!-- Google Tag Manager - IT-ERA -->
<script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({"gtm.start":
new Date().getTime(),event:"gtm.js"});var f=d.getElementsByTagName(s)[0],
j=d.createElement(s),dl=l!="dataLayer"?"&l="+l:"";j.async=true;j.src=
"https://www.googletagmanager.com/gtm.js?id="+i+dl;f.parentNode.insertBefore(j,f);
})(window,document,"script","dataLayer","GTM-KPF3JZT");</script>
<!-- End Google Tag Manager -->
</head>
<body class="bg-light">
<!-- Google Tag Manager (noscript) - IT-ERA -->
<noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-KPF3JZT"
height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
<!-- End Google Tag Manager (noscript) -->
  <div class="container py-4">
    <h1 class="h3 mb-4">SEO Status — Anteprima</h1>
    <p class="text-muted">Questa è un'anteprima. Sarà pubblicata come /pages/seo-status.html dopo approvazione.</p>
    <div id="table-container" class="table-responsive"></div>
  </div>
  <script>
  const rows = [];
  // Elenco di base — verrà sostituito in produzione con uno script di generazione
  rows.push({ city: 'Monza', slug: 'monza', url: 'https://it-era.it/assistenza-it-monza', kws: 'assistenza it monza; help desk monza', h1: 'OK', title: 'OK', meta: 'OK', alt: 'PENDING', mtime: new Date().toISOString().slice(0,10), in_sitemap: 'YES' });
  rows.push({ city: 'Arcore', slug: 'arcore', url: 'https://it-era.it/assistenza-it-arcore', kws: 'assistenza it arcore; help desk arcore', h1: 'OK', title: 'OK', meta: 'OK', alt: 'PENDING', mtime: new Date().toISOString().slice(0,10), in_sitemap: 'YES' });

  const headers = ['Città', 'URL', 'Keyword target', 'Titolo/H1/Meta', 'Alt text', 'Ultima modifica', 'In sitemap'];
  const table = document.createElement('table');
  table.className = 'table table-striped table-bordered';
  const thead = document.createElement('thead');
  thead.innerHTML = `<tr>
    <th>${headers[0]}</th><th>${headers[1]}</th><th>${headers[2]}</th>
    <th>${headers[3]}</th><th>${headers[4]}</th><th>${headers[5]}</th><th>${headers[6]}</th>
  </tr>`;
  table.appendChild(thead);
  const tbody = document.createElement('tbody');
  rows.forEach(r => {
    const tr = document.createElement('tr');
    tr.innerHTML = `<td>${r.city}</td>
      <td><a href="${r.url}" target="_blank">${r.url}</a></td>
      <td>${r.kws}</td>
      <td>${r.title}/${r.h1}/${r.meta}</td>
      <td>${r.alt}</td>
      <td>${r.mtime}</td>
      <td>${r.in_sitemap}</td>`;
    tbody.appendChild(tr);
  });
  table.appendChild(tbody);
  document.getElementById('table-container').appendChild(table);
  </script>
</body>
</html>

